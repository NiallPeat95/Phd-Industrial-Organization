---
title: "Coding: BLP (1995)"
author: "Matteo Courthoud"
type: book
weight: 12
date: 2021-10-29
bibliography: references.bib
link-citations: true
output: 
  html_notebook: 
    toc: true
    toc_depth: 2
  ioslides_presentation:
    widescreen: true
    smaller: true
    transition: 0
    slide_level: 3
    css: custom.css
  md_document:
    variant: markdown_mmd
    preserve_yaml: true
---

```{r, include=FALSE, echo=FALSE}
# Import packages
library(tidyverse)    # Fur alles
library(data.table)   # For freadr
library(knitr)        # For kable
library(broom)        # For tidy
library(AER)          # For ivreg
```

```{r load julia if not already loaded, include=FALSE, echo=FALSE}
if (!("JuliaCall" %in% (.packages()))) {
  library(JuliaCall)
  julia <- julia_setup("/Users/mcourt/Documents/Julia-1.5.app/Contents/Resources/julia/bin")
}
```

```{julia, include=FALSE, echo=FALSE}
#import Pkg
#Pkg.add("Optim")
#Pkg.add("Statistics")
#Pkg.add("Distributions")
#Pkg.add("Random")
#Pkg.add("DataFrames")
#Pkg.add("CSV")

using Optim
using Distributions
using Statistics
using Random
using DataFrames
using CSV
```

### Intro

In this session, I am going to cover demand estimation.

- Compute equilibrium outcomes with RCL demand
- Simulate market-level data
  - Extremely similar to the logit demand simulation
- Build the BLP estimator from @berry1995automobile



### Model

In this first part, we are going to assume that consumer $i \in \lbrace1,...,I\rbrace$ utility from good $j \in \lbrace1,...,J\rbrace$ in market $t \in \lbrace1,...,T\rbrace$ takes the form

$$
u_{ijt} = \boldsymbol x_{jt} \boldsymbol \beta_{it} - \alpha p_{jt} + \xi_{jt} + \epsilon_{ijt}
$$

where

- $\xi_{jt}$ is type-1 extreme value distributed
- $\boldsymbol \beta_{it}$: has dimension $K$
  $$\beta_{it}^k = \beta_0^k + \sigma_k \zeta_{it}^k$$
  - $\beta_0^k$: fixed taste for characteristic $k$ (the usual $\beta$)
  - $\zeta_{it}^k$: random taste, i.i.d. across consumers and markets $t$

### Setup

We have $J$ firms and each product has $K$ characteristics. 

```{julia}
J = 3;                  # 3 firms == products
K = 2;                  # 2 product characteristics
c = rand(J);            # Random uniform marginal costs
xi = randn(J+1);        # Random normal individual shocks
X = randexp(J, K);      # Random exponential product characteristics
b = [ones(K); -1]       # Unitary preferences (also for prices)
```





## References

------------------------------------------------------------------------
